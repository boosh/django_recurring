<div class="recurrence-set-widget" id="recurrence-set-widget-{{ widget.name }}">
    <input id="{{ widget.attrs.id }}" name="{{ widget.name }}" type="hidden"
           value="{{ widget.value|default_if_none:'' }}"
           data-initial="{{ widget.attrs.data_initial|default_if_none:'' }}">
    <div id="recurrence-set-form-{{ widget.name }}">
        <h3>Rules</h3>
        <div id="rules-container">
            <!-- Rules will be dynamically added here by JavaScript -->
        </div>
        <button id="add-rule" type="button">Add Rule</button>
    </div>
    <div class="recurrence-set-text" id="recurrence-set-text-{{ widget.name }}"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        if (typeof initRecurrenceSetWidget === 'function') {
            try {
                initRecurrenceSetWidget('{{ widget.name }}');
            } catch (error) {
                console.error('Error initializing RecurrenceSetWidget:', error);
            }
        } else {
            console.error('initRecurrenceSetWidget function is not defined');
        }
    });
</script>
